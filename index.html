<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CropGuard AI - Farmer App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style id="app-style">
    body {
      font-family: 'Quicksand', sans-serif;
      background-color: #f7f7f2;
      color: #333;
    }
    
    .earthy-gradient {
      background: linear-gradient(135deg, #8BAA61 0%, #5D7C3A 100%);
    }
    
    .leaf-pattern {
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj48cGF0aCBkPSJNMzAgNUM0MCA1IDUwIDE1IDUwIDI1QzUwIDM1IDQwIDQ1IDMwIDQ1QzIwIDQ1IDEwIDM1IDEwIDI1QzEwIDE1IDIwIDUgMzAgNVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgxMzksIDE3MCwgOTcsIDAuMikiIHN0cm9rZS13aWR0aD0iMSIvPjwvc3ZnPg==');
      background-repeat: repeat;
      background-size: 60px 60px;
    }
    
    .card {
      background-color: white;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      transition: transform 0.2s ease-in-out;
    }
    
    .card:hover {
      transform: translateY(-2px);
    }
    
    .btn-primary {
      background-color: #5D7C3A;
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background-color: #4a6330;
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background-color: #E9EBDE;
      color: #5D7C3A;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background-color: #dfe3cd;
    }
    
    .tab-active {
      border-bottom: 3px solid #5D7C3A;
      color: #5D7C3A;
      font-weight: 600;
    }
    
    .spinner {
      border: 4px solid rgba(93, 124, 58, 0.3);
      border-radius: 50%;
      border-top: 4px solid #5D7C3A;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .weather-alert {
      background-color: #FFF3CD;
      border-left: 4px solid #FFD700;
    }
    
    .custom-file-upload {
      cursor: pointer;
    }
    
    #photoInput {
      display: none;
    }
    
    .offline-banner {
      background-color: #F8D7DA;
      color: #721C24;
    }
    
    .treatment-step {
      counter-increment: step-counter;
    }
    
    .treatment-step:before {
      content: counter(step-counter);
      background-color: #5D7C3A;
      color: white;
      font-weight: bold;
      padding: 3px 8px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #FF6B6B;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    @media (max-width: 640px) {
      .history-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Offline Banner -->
  <div id="offlineBanner" class="hidden offline-banner px-4 py-2 text-center text-sm">
    <i class="fas fa-exclamation-triangle mr-2"></i>
    <span id="offlineText">You are currently offline. Some features may be limited.</span>
  </div>

  <!-- Header -->
  <header class="earthy-gradient text-white p-4 shadow-md">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center">
        <i class="fas fa-leaf text-2xl mr-2"></i>
        <h1 class="text-xl font-bold">CropGuard AI</h1>
      </div>
      <div class="flex items-center">
        <div class="mr-4">
          <select id="languageSelector" class="bg-white bg-opacity-20 rounded px-3 py-1 text-sm focus:outline-none">
            <option value="en">English</option>
            <option value="sw">Swahili</option>
            <option value="fr">French</option>
            <option value="hi">Hindi</option>
            <option value="es">Spanish</option>
          </select>
        </div>
        <a href="javascript:void(0)" id="settingsBtn" class="p-2 rounded-full hover:bg-white hover:bg-opacity-20 relative">
          <i class="fas fa-cog"></i>
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6">
    
    <!-- Weather Widget -->
    <div class="mb-8">
      <div class="card p-4 flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center mb-3 md:mb-0">
          <i class="fas fa-cloud-sun text-3xl text-yellow-500 mr-3"></i>
          <div>
            <h3 class="font-semibold" id="weatherLocation">Your Location</h3>
            <p class="text-gray-600"><span id="weatherTemp">--°C</span>, <span id="weatherCondition">--</span></p>
          </div>
        </div>
        <div class="flex items-center">
          <i class="fas fa-tint text-blue-500 mr-1"></i>
          <span class="mr-3" id="weatherHumidity">Humidity: --%</span>
          <i class="fas fa-wind text-gray-500 mr-1"></i>
          <span id="weatherWind">Wind: -- km/h</span>
        </div>
      </div>
      
      <div id="weatherAlert" class="hidden weather-alert mt-2 p-3 rounded-lg">
        <div class="flex items-center">
          <i class="fas fa-exclamation-circle text-yellow-600 mr-2"></i>
          <p class="text-sm font-medium" id="alertText">Current humidity and temperature conditions favor disease development. Consider preventive measures.</p>
        </div>
      </div>
    </div>

    <!-- Upload Section -->
    <section class="mb-8">
      <div class="card p-6 text-center leaf-pattern">
        <h2 class="text-xl font-bold mb-4" id="uploadTitle">Scan Your Plant</h2>
        <p class="mb-6 text-gray-600" id="uploadDescription">Take or upload a photo of a plant leaf to detect disease and get treatment recommendations.</p>
        
        <div class="flex justify-center gap-4 flex-wrap">
          <label for="photoInput" class="custom-file-upload btn-primary px-6 py-3 rounded-lg flex items-center">
            <i class="fas fa-upload mr-2"></i>
            <span id="uploadBtnText">Upload Photo</span>
          </label>
          <input type="file" id="photoInput" accept="image/*">
          
          <button id="cameraBtn" class="btn-secondary px-6 py-3 rounded-lg flex items-center">
            <i class="fas fa-camera mr-2"></i>
            <span id="cameraBtnText">Take Photo</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Diagnosis Result (Initially Hidden) -->
    <section id="diagnosisSection" class="mb-8 hidden">
      <div class="card p-6">
        <!-- Loading State -->
        <div id="loadingState" class="py-8 flex flex-col items-center">
          <div class="spinner mb-4"></div>
          <p class="text-gray-600" id="analyzingText">Analyzing your plant...</p>
        </div>
        
        <!-- Results State -->
        <div id="resultsState" class="hidden">
          <div class="flex flex-col md:flex-row gap-6">
            <div class="md:w-1/3">
              <div class="rounded-lg overflow-hidden bg-gray-100 h-64 flex items-center justify-center">
                <img id="diagnosisImage" class="max-h-full max-w-full object-contain" src="" alt="Plant leaf image">
              </div>
              <div class="mt-3 text-center">
                <span class="inline-block bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">
                  <i class="fas fa-check-circle mr-1"></i>
                  <span id="confidenceText">95% Confidence</span>
                </span>
              </div>
            </div>
            
            <div class="md:w-2/3">
              <h3 class="text-xl font-bold mb-2" id="diseaseNameTitle">Disease Detection Result</h3>
              <p class="text-2xl font-bold text-red-600 mb-4" id="diseaseName">--</p>
              
              <h4 class="font-semibold mb-2" id="treatmentTitle">Treatment Recommendations:</h4>
              <ul class="space-y-2 mb-4" id="treatmentList">
                <!-- Treatment steps will go here -->
              </ul>
              
              <h4 class="font-semibold mb-2" id="tipsTitle">Farming Tips:</h4>
              <ul class="space-y-1 mb-4 text-gray-700" id="tipsList">
                <!-- Tips will go here -->
              </ul>
              
              <div class="flex mt-6">
                <button class="btn-secondary px-4 py-2 rounded-lg mr-3">
                  <i class="fas fa-save mr-1"></i>
                  <span id="saveBtnText">Save Result</span>
                </button>
                <button class="btn-primary px-4 py-2 rounded-lg">
                  <i class="fas fa-share-alt mr-1"></i>
                  <span id="shareBtnText">Share</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tabs Navigation -->
    <div class="border-b border-gray-200 mb-6">
      <div class="flex">
        <button class="tab-active py-3 px-6" id="historyTab">
          <i class="fas fa-history mr-2"></i>
          <span id="historyTabText">History</span>
        </button>
        <button class="py-3 px-6 text-gray-500" id="communityTab">
          <i class="fas fa-users mr-2"></i>
          <span id="communityTabText">Community Forum</span>
        </button>
      </div>
    </div>

    <!-- History Section -->
    <section id="historySection" class="mb-8">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold" id="historyTitle">Scan History</h2>
        <button class="text-sm text-gray-500">
          <i class="fas fa-trash-alt mr-1"></i>
          <span id="clearHistoryText">Clear History</span>
        </button>
      </div>
      
      <div id="noHistory" class="text-center py-12 text-gray-500">
        <i class="fas fa-seedling text-5xl mb-3 text-gray-400"></i>
        <p id="noHistoryText">Your scan history will appear here.</p>
      </div>
      
      <div id="historyItems" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 history-grid">
        <!-- History items will go here -->
      </div>
    </section>

    <!-- Community Forum Section (Initially Hidden) -->
    <section id="communitySection" class="mb-8 hidden">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold" id="communityTitle">Community Forum</h2>
        <button class="btn-primary px-4 py-2 rounded-lg">
          <i class="fas fa-plus mr-1"></i>
          <span id="newPostText">New Post</span>
        </button>
      </div>
      
      <div id="noPostsMessage" class="text-center py-12 text-gray-500">
        <i class="fas fa-comments text-5xl mb-3 text-gray-400"></i>
        <p id="noPostsText">Be the first to start a discussion!</p>
      </div>
      
      <div id="communityPosts" class="space-y-4">
        <!-- Community posts will go here -->
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <div class="flex items-center">
            <i class="fas fa-leaf text-green-400 mr-2"></i>
            <h2 class="text-lg font-bold">CropGuard AI</h2>
          </div>
          <p class="text-sm text-gray-400" id="footerTagline">Empowering farmers with AI technology</p>
        </div>
        
        <div class="flex space-x-4">
          <a href="javascript:void(0)" class="hover:text-green-400">
            <i class="fas fa-info-circle mr-1"></i>
            <span id="aboutLinkText">About</span>
          </a>
          <a href="javascript:void(0)" class="hover:text-green-400">
            <i class="fas fa-question-circle mr-1"></i>
            <span id="helpLinkText">Help</span>
          </a>
          <a href="javascript:void(0)" class="hover:text-green-400">
            <i class="fas fa-envelope mr-1"></i>
            <span id="contactLinkText">Contact</span>
          </a>
        </div>
      </div>
      <div class="mt-4 text-center text-sm text-gray-400">
        <p id="copyrightText">&copy; 2025 CropGuard AI. All rights reserved to Senator Sammy.</p>
      </div>
    </div>
  </footer>

  <!-- Settings Modal (Initially Hidden) -->
  <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold" id="settingsTitle">Settings</h2>
        <button id="closeSettings" class="text-gray-500 hover:text-gray-700">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="mb-4">
        <h3 class="font-semibold mb-2" id="notificationTitle">Notifications</h3>
        <div class="flex items-center">
          <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" id="notificationToggle" class="sr-only peer">
            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
            <span class="ml-3 text-sm font-medium text-gray-900" id="notificationText">Seasonal threat notifications</span>
          </label>
        </div>
      </div>
      
      <div class="mb-4">
        <h3 class="font-semibold mb-2" id="dataStorageTitle">Data Storage</h3>
        <div class="flex items-center">
          <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" id="storageToggle" class="sr-only peer" checked>
            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
            <span class="ml-3 text-sm font-medium text-gray-900" id="dataStorageText">Store scan history locally</span>
          </label>
        </div>
      </div>
      
      <div class="mb-4">
        <h3 class="font-semibold mb-2" id="aboutTitle">About CropGuard AI</h3>
        <p class="text-sm text-gray-600" id="aboutText">
          CropGuard AI is an AI-powered tool that helps farmers identify plant diseases and get treatment recommendations. Version 1.0.
        </p>
      </div>
      
      <button class="btn-primary w-full py-2 rounded-lg mt-2" id="saveSettingsBtn">
        <span id="saveSettingsText">Save Settings</span>
      </button>
    </div>
  </div>

  <!-- Camera Modal (Initially Hidden) -->
  <div id="cameraModal" class="fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center hidden">
    <div class="max-w-lg w-full p-4">
      <div class="bg-white rounded-lg overflow-hidden">
        <div class="p-4 bg-gray-100 flex justify-between items-center">
          <h3 class="font-bold" id="cameraModalTitle">Take a Photo</h3>
          <button id="closeCamera" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="relative">
          <video id="cameraFeed" class="w-full h-64 bg-black" autoplay muted></video>
          <canvas id="captureCanvas" class="hidden"></canvas>
        </div>
        
        <div class="p-4 flex justify-center">
          <button id="takePictureBtn" class="btn-primary rounded-full w-16 h-16 flex items-center justify-center">
            <i class="fas fa-camera text-xl"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script id="app-script">
    // DOM Element References
    const offlineBanner = document.getElementById('offlineBanner');
    const diagnosisSection = document.getElementById('diagnosisSection');
    const loadingState = document.getElementById('loadingState');
    const resultsState = document.getElementById('resultsState');
    const historyTab = document.getElementById('historyTab');
    const communityTab = document.getElementById('communityTab');
    const historySection = document.getElementById('historySection');
    const communitySection = document.getElementById('communitySection');
    const photoInput = document.getElementById('photoInput');
    const cameraBtn = document.getElementById('cameraBtn');
    const cameraModal = document.getElementById('cameraModal');
    const closeCamera = document.getElementById('closeCamera');
    const takePictureBtn = document.getElementById('takePictureBtn');
    const cameraFeed = document.getElementById('cameraFeed');
    const captureCanvas = document.getElementById('captureCanvas');
    const noHistory = document.getElementById('noHistory');
    const historyItems = document.getElementById('historyItems');
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsModal = document.getElementById('settingsModal');
    const closeSettings = document.getElementById('closeSettings');
    const saveSettingsBtn = document.getElementById('saveSettingsBtn');
    
    // Check for online/offline status
    const updateOnlineStatus = () => {
      if (navigator.onLine) {
        offlineBanner.classList.add('hidden');
      } else {
        offlineBanner.classList.remove('hidden');
      }
    };
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();
    
    // Tab Switching
    historyTab.addEventListener('click', () => {
      historyTab.classList.add('tab-active');
      communityTab.classList.remove('tab-active');
      communityTab.classList.add('text-gray-500');
      historySection.classList.remove('hidden');
      communitySection.classList.add('hidden');
    });
    
    communityTab.addEventListener('click', () => {
      communityTab.classList.add('tab-active');
      communityTab.classList.remove('text-gray-500');
      historyTab.classList.remove('tab-active');
      communitySection.classList.remove('hidden');
      historySection.classList.add('hidden');
    });
    
    // Photo Upload
    photoInput.addEventListener('change', function(event) {
      if (event.target.files && event.target.files[0]) {
        // Show diagnosis section with loading state
        diagnosisSection.classList.remove('hidden');
        loadingState.classList.remove('hidden');
        resultsState.classList.add('hidden');
        
        // Simulate API call with delay
        setTimeout(() => {
          loadingState.classList.add('hidden');
          resultsState.classList.remove('hidden');
          
          // Display the uploaded image
          const fileReader = new FileReader();
          fileReader.onload = function(e) {
            document.getElementById('diagnosisImage').src = e.target.result;
          }
          fileReader.readAsDataURL(event.target.files[0]);
          
          // Show fake diagnosis data
          document.getElementById('diseaseName').textContent = "Late Blight";
          
          // Clear and populate treatment list
          const treatmentList = document.getElementById('treatmentList');
          treatmentList.innerHTML = '';
          
          const treatments = [
            "Apply copper-based fungicide as directed on the label",
            "Remove and destroy infected plant material",
            "Improve air circulation around plants",
            "Avoid overhead watering"
          ];
          
          treatments.forEach(treatment => {
            const li = document.createElement('li');
            li.className = 'treatment-step';
            li.textContent = treatment;
            treatmentList.appendChild(li);
          });
          
          // Clear and populate tips list
          const tipsList = document.getElementById('tipsList');
          tipsList.innerHTML = '';
          
          const tips = [
            "Plant resistant varieties next season",
            "Practice crop rotation",
            "Maintain plant spacing for better airflow",
            "Consider drip irrigation to avoid wet foliage"
          ];
          
          tips.forEach(tip => {
            const li = document.createElement('li');
            li.innerHTML = `<i class="fas fa-check-circle text-green-600 mr-2"></i>${tip}`;
            tipsList.appendChild(li);
          });
          
          // Save to history (in real app would be using LocalStorage)
          saveToHistory({
            image: document.getElementById('diagnosisImage').src,
            disease: "Late Blight",
            confidence: "95%",
            date: new Date().toISOString()
          });
          
        }, 2000);
      }
    });
    
    // Camera Functionality
    cameraBtn.addEventListener('click', () => {
      cameraModal.classList.remove('hidden');
      
      // In a real application, this would initiate the device camera
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(stream => {
            cameraFeed.srcObject = stream;
          })
          .catch(error => {
            console.error("Camera error:", error);
            // Would show error message to user
          });
      }
    });
    
    closeCamera.addEventListener('click', () => {
      cameraModal.classList.add('hidden');
      
      // Stop the camera stream
      if (cameraFeed.srcObject) {
        cameraFeed.srcObject.getTracks().forEach(track => track.stop());
      }
    });
    
    takePictureBtn.addEventListener('click', () => {
      // Capture image from video
      const context = captureCanvas.getContext('2d');
      captureCanvas.width = cameraFeed.videoWidth;
      captureCanvas.height = cameraFeed.videoHeight;
      context.drawImage(cameraFeed, 0, 0, captureCanvas.width, captureCanvas.height);
      
      // Get image as data URL
      const imageDataURL = captureCanvas.toDataURL('image/png');
      
      // Close camera modal
      cameraModal.classList.add('hidden');
      
      // Stop the camera stream
      if (cameraFeed.srcObject) {
        cameraFeed.srcObject.getTracks().forEach(track => track.stop());
      }
      
      // Show diagnosis section with loading state
      diagnosisSection.classList.remove('hidden');
      loadingState.classList.remove('hidden');
      resultsState.classList.add('hidden');
      
      // Simulate API call with delay (similar to photo upload)
      setTimeout(() => {
        loadingState.classList.add('hidden');
        resultsState.classList.remove('hidden');
        
        // Display the captured image
        document.getElementById('diagnosisImage').src = imageDataURL;
        
        // Show fake diagnosis data (same as in photo upload)
        document.getElementById('diseaseName').textContent = "Powdery Mildew";
        
        // Clear and populate treatment list
        const treatmentList = document.getElementById('treatmentList');
        treatmentList.innerHTML = '';
        
        const treatments = [
          "Apply sulfur-based fungicide",
          "Remove severely infected leaves",
          "Space plants for better air circulation",
          "Avoid excessive nitrogen fertilization"
        ];
        
        treatments.forEach(treatment => {
          const li = document.createElement('li');
          li.className = 'treatment-step';
          li.textContent = treatment;
          treatmentList.appendChild(li);
        });
        
        // Clear and populate tips list
        const tipsList = document.getElementById('tipsList');
        tipsList.innerHTML = '';
        
        const tips = [
          "Water at the base of plants, not on leaves",
          "Morning watering is best to allow leaves to dry",
          "Clean tools between plants to prevent spread",
          "Monitor plants regularly for early detection"
        ];
        
        tips.forEach(tip => {
          const li = document.createElement('li');
          li.innerHTML = `<i class="fas fa-check-circle text-green-600 mr-2"></i>${tip}`;
          tipsList.appendChild(li);
        });
        
        // Save to history
        saveToHistory({
          image: imageDataURL,
          disease: "Powdery Mildew",
          confidence: "92%",
          date: new Date().toISOString()
        });
        
      }, 2000);
    });
    
    // Settings Modal
    settingsBtn.addEventListener('click', () => {
      settingsModal.classList.remove('hidden');
    });
    
    closeSettings.addEventListener('click', () => {
      settingsModal.classList.add('hidden');
    });
    
    saveSettingsBtn.addEventListener('click', () => {
      // In a real app, would save settings to localStorage
      settingsModal.classList.add('hidden');
      
      // Show a temporary success message
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg';
      notification.textContent = 'Settings saved successfully';
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    });
    
    // Weather data - simulated API call
    const loadWeatherData = () => {
      // In a real app, this would fetch from a weather API
      setTimeout(() => {
        document.getElementById('weatherLocation').textContent = 'Your Location';
        document.getElementById('weatherTemp').textContent = '24°C';
        document.getElementById('weatherCondition').textContent = 'Partly Cloudy';
        document.getElementById('weatherHumidity').textContent = 'Humidity: 78%';
        document.getElementById('weatherWind').textContent = 'Wind: 5 km/h';
        
        // Show weather alert based on conditions
        const humidity = 78;
        if (humidity > 75) {
          document.getElementById('weatherAlert').classList.remove('hidden');
        }
      }, 1000);
    };
    
    // History functionality
    const saveToHistory = (item) => {
      // In a real app, this would save to localStorage
      // For prototype, just update UI
      noHistory.classList.add('hidden');
      
      const historyCard = document.createElement('div');
      historyCard.className = 'card p-4';
      historyCard.innerHTML = `
        <div class="flex items-center">
          <div class="w-16 h-16 bg-gray-100 rounded overflow-hidden mr-3 flex-shrink-0">
            <img src="${item.image}" class="w-full h-full object-cover" alt="Scan history">
          </div>
          <div>
            <h4 class="font-semibold">${item.disease}</h4>
            <div class="flex items-center text-xs text-gray-500">
              <span class="mr-2">${formatDate(item.date)}</span>
              <span class="bg-green-100 text-green-800 px-2 py-0.5 rounded-full">${item.confidence}</span>
            </div>
          </div>
        </div>
      `;
      
      historyItems.prepend(historyCard);
    };
    
    const formatDate = (dateString) => {
      const date = new Date(dateString);
      return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    };
    
    // Language selector functionality
    document.getElementById('languageSelector').addEventListener('change', function(event) {
      const lang = event.target.value;
      // In a real app, this would update all text content based on selected language
      // For the prototype, we'll just show a notification
      
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-blue-500 text-white px-4 py-2 rounded shadow-lg';
      
      const languages = {
        en: 'English',
        sw: 'Swahili',
        fr: 'French',
        hi: 'Hindi',
        es: 'Spanish'
      };
      
      notification.textContent = `Language changed to ${languages[lang]}`;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    });
    
    // Initialize app
    const initApp = () => {
      loadWeatherData();
      
      // Add some fake history items for demonstration
      if (historyItems.children.length === 0) {
        // No history items to show, keep the "no history" message visible
      }
    };
    
    // Run initialization
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>

